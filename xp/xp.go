package xp

// This maps a level to the XP required to reach it, relative to the
// previous level. E.g., to reach level 2, 933 XP are required.
var XPPerFightLevel = []int{
	0, 933, 1800, 1932, 2399, 2189, 6063, 5144, 6332, 6163, 6899, 9594, 5641, 9644, 10076, 11200, 11700, 12520, 13210, 13797, 14006, // 0 - 20
	14640, 14709, 15422, 15840, 16460, 16474, 17996, 18394, 18003, 19511, 18991, 19331, 19966, 20162, 20700, 22000, 23100, 22000, 22800, 23400, // 21 -40
	23800, 24800, 25200, 25600, 26000, 24000, 26000, 27000, 28156, 28566, 29099, 29282, 29050, 32117, 30259, 31314, 31348, 31522, 32281, 31567, // 41 - 60
	33000, 36008, 36003, 36000, 37575, 35658, 36000, 38066, 39300, 37900, 39900, 39900, 40900, 41500, 41900, 40728, 41148, 41360, 41659, 43390, // 61 - 80
	42845, 43761, 44451, 43966, 44055, 44863, 45499, 45631, 46457, 48289, 47270, 47546, 47808, 48704, 49019, 50086, 50510, 51251, 51000, 51867, // 81 - 100
	52165, 51768, 52091, 51872, 53137, 53847, 53552, 51152, 56656, 53989, 55818, 55952, 55987, 55952, 57491, 57153, 57122, 57353, 58035, 59178, // 101 - 120
	60672, 60473, 60617, 60231, 61060, 62410, 62426, 63419, 64315, 65574, 67108, 68627, 68628, 70312, 71642, 72136, 73780, 74790, 74846, 76843, // 121 - 140
	76597, 78210, 78209, 81048, 81884, 82470, 83049, 83139, 85123, 85322, 87468, 88384, 88189, 90314, 90716, 92848, 92670, 94366, 95123, 96719, // 141 - 160
	96095, 99237, 99858, 99808, 101813, 101989, 103813, 104234, 105535, 105215, 107918, 108728, 109434, 110330, 110392, 112578, 113554, 114870, 115241, 116789, // 161 - 180
	117893, 119220, 119485, 120239, 120247, 122727, 122362, 123931, 125130, 125187, 128271, 128157, 128074, 129905, 130126, 132682, 133556, 134170, 134996, 135961, // 181 - 200
	137615, 139153, 140130, 139072, 141586, 143068, 143774, 143111, 144325, 146485, 146665, 148266, 148880, 150929, 150611, 151291, 152578, 154605, 154976, 155204, // 201 - 220
	158340, 157640, 159286, 159194, 160864, 162050, 162458, 163598, 165519, 165221, 167805, 168675, 169978, 169361, 170891, 171771, 172132, 174481, 175511, 176974, // 221 - 240
	178143, 177502, 179336, 179309, 181306, 181767, 182164, 184174, 184573, 185129, // 241 - 250
}


var xpBaseValues = map[int]int{
	0: 1000,
	-1:  959,
	-2:  922,
	-3:  886,
	-4:  855,
	-5:  823,
	-6:  796,
	-7:  767,
	-8:  740,
	-9:  707,
	-10: 660,
	-11: 565,
	-12: 477,
	-13: 393,
	-14: 308,
	-15: 228,
	-16: 171,
	-17: 128,
	-18: 103,
	-19: 79,
	-20: 62,
	-21: 52,
	-22: 43,
	-23: 37,
	-24: 34,
	-25: 31,
	-26: 28,
	-27: 25,
	-28: 21,
	-29: 20,
	-30: 19,
	-31: 18,
	-32: 17,
	-33: 17,
	-34: 16,
	-35: 14,
	-36: 14,
	-37: 12,
	-38: 12,
	-39: 10,
	-40: 9,
	-41: 8,
	-42: 8,
	-43: 7,
	-44: 6,
	-45: 4,
	-46: 4,
	-47: 3,
	-48: 2,
	-49: 1,
	-50: 0,
}

func BaseXP(diff int) (x int) {
	if diff > 0 {
		// integer division is on purpose
		d := (diff / 21) * 90
		x = 1000 + (diff * 100) + (d * (diff - 20))
	} else {
		x = xpBaseValues[diff]
	}

	return
}

func XPToNextLevel(current_level int) int {
	// levels are 1-based, our array is 0-based
	return XPPerFightLevel[current_level]
}
